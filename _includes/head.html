<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" type="image/x-icon" href="{{ site.baseurl }}/favicon.ico">
  <link rel="alternate" type="application/atom+xml" title="{{ site.title }}" href="{{ " /feed.xml" | relative_url }}">

  <link rel="icon" href="{{ site.baseurl }}/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="{{ '/assets/css/styles.css' | relative_url }}?v={{ site.time | date: '%s' }}">
  {% if page.layout == 'post' or page.layout == 'personal' %}
  <link rel="stylesheet" href="https://unpkg.com/applause-button/dist/applause-button.css">
  <script src="https://unpkg.com/applause-button/dist/applause-button.js"></script>
  {% endif %}

  {% if page.noindex %}
  <meta name="robots" content="noindex, follow">
  {% endif %}

  {%- if page.type == 'video' -%}
  {%- assign vid_thumbnail = page.thumbnail -%}
  {%- if vid_thumbnail == nil or vid_thumbnail == '' -%}
  {%- if page.platform == 'youtube' and page.youtube_id -%}
  {%- assign yt_id = page.youtube_id -%}
  {%- if page.youtube_id contains 'v=' -%}
  {%- assign yt_id = page.youtube_id | split: 'v=' | last | split: '&' | first -%}
  {%- elsif page.youtube_id contains 'shorts/' -%}
  {%- assign yt_id = page.youtube_id | split: 'shorts/' | last | split: '?' | first -%}
  {%- elsif page.youtube_id contains 'youtu.be/' -%}
  {%- assign yt_id = page.youtube_id | split: 'youtu.be/' | last | split: '?' | first -%}
  {%- endif -%}
  {%- assign vid_thumbnail = "https://img.youtube.com/vi/" | append: yt_id | append: "/hqdefault.jpg" -%}
  {%- elsif page.platform == 'instagram' and page.instagram_id -%}
  {%- assign vid_thumbnail = "https://www.instagram.com/p/" | append: page.instagram_id | append: "/media/?size=l" -%}
  {%- endif -%}
  {%- endif -%}

  {%- if vid_thumbnail -%}
  {%- assign page_has_video_thumbnail = vid_thumbnail -%}
  {%- endif -%}
  {%- endif -%}

  {%- if jekyll.environment == 'production' -%}
  {%- if page_has_video_thumbnail -%}
  {%- assign original_image = page.image -%}
  {%- assign page.image = page_has_video_thumbnail -%}
  {%- seo -%}
  {%- assign page.image = original_image -%}
  {%- else -%}
  {%- seo -%}
  {%- endif -%}
  {%- endif -%}


  {% endif %}

  <!-- <link rel="stylesheet" href="{{ "/assets/main.css" | relative_url }}"> -->
  {%- feed_meta -%}
  {%- if jekyll.environment == 'production' and site.google_analytics -%}
  {%- include google-analytics.html -%}
  {%- endif -%}
  <!-- Add KaTeX support -->
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css" integrity="sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI" crossorigin="anonymous"> -->
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css" as="style"
    onload="this.onload=null;this.rel='stylesheet'"
    integrity="sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI" crossorigin="anonymous">
  <noscript>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css"
      integrity="sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI" crossorigin="anonymous">
  </noscript>

</head>